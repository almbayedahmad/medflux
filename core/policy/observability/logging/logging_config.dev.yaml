# Developer-friendly logging profile. Mirrors the global structure but keeps
# DEBUG verbosity and disables sampling/rate limits so local troubleshooting is easy.
meta:
  version: 1
  id: logging_config_dev

logging:
  version: 1
  disable_existing_loggers: false

  formatters:
    standard:
      format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
      datefmt: "%Y-%m-%d %H:%M:%S"
    json:
      '()': core.logging.json_formatter.JSONLogFormatter

  filters:
    redaction:
      '()': core.logging.redaction.RedactionFilter
    context:
      '()': core.logging.context.ContextFilter

  handlers:
    console:
      class: logging.StreamHandler
      level: DEBUG
      formatter: standard
      stream: ext://sys.stdout
      filters: [context, redaction]

    json_file:
      class: logging.handlers.RotatingFileHandler
      level: DEBUG
      formatter: json
      filename: "logs/current.jsonl"
      maxBytes: 10485760
      backupCount: 2
      encoding: "utf-8"
      delay: true
      filters: [context, redaction]

  root:
    level: DEBUG
    handlers: [console, json_file]

  loggers:
    uvicorn.access:
      level: WARNING
    PIL:
      level: WARNING
    pdfminer:
      level: WARNING
